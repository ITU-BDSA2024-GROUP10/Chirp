@page
@model Chirp.Web.Pages.AboutMe

@{
    ViewData["Title"] = "Chirp!";
    Layout = "Shared/_Layout";
}
<script type="text/javascript">
    function showPopup() {
        document.getElementById('popup').style.display = 'flex';
    }

    function cancelPopup() {
        document.getElementById('popup').style.display = 'none';
    }
</script>
<div>
    <h2>Name: @Model.Author!.UserName</h2>
    <h3>Email: @Model.Author.Email</h3>

    @if (Model.Author.ProfileImage != null && Model.Author.ProfileImage.Length > 0)
    {
    <img src="data:image;base64,@Convert.ToBase64String(Model.Author.ProfileImage)" alt="Profile Image" style="max-width: 150px; max-height: 150px;" />
    }
    else
    {
    <p>No profile image available.</p>
    }
    
    <div style="display: flex;">
        <h4>Following: @Model.AmountYouFollow</h4>
        <div style="margin-right: 25px"></div>
        <h4>Followers: @Model.AmountOfFollowers</h4>
    </div>
    
    @if (Model.Cheeps.Count == 1)
    {
        <h4>You have Cheep'd: @Model.Cheeps.Count time</h4>
    }
    else
    {
        <h4>You have Cheep'd: @Model.Cheeps.Count times</h4>
    }
    
    <button onclick="showPopup()" type="submit">Forget Me</button>
    <div id="popup" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background-color: white; padding: 20px; border-radius: 5px; text-align: center; min-width: 300px;">
            <p>Are you sure you want to delete your account? This action cannot be undone.</p>
            <button type="button" onclick="cancelPopup()">Cancel</button>
            <form method="post" asp-page-handler="ConfirmDelete">
                <button type="submit">Yes, Delete</button>
            </form>
        </div>
    </div>
    
    
    @await Component.InvokeAsync("CheepList", new {cheeps = Model.Cheeps, targetPage = "/AboutMe"})
</div>
